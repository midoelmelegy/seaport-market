---
sidebar_label: Buy and Sell
sidebar_position: 10
---

# Create & Fill Orders (Buy & Sell)

Reservoir gives you access to a fully functional aggregated order book that strives to be a global pool of _all_ NFT liquidity. You can both create orders (list for sale, make an offer) or fill orders (buy token, accept offer).

Importantly, because its a shared order book, tools can specialize on different parts of the market. For example, a market maker could generate bids and feed them directly into the order book, while a wallet could place a sell button next to every NFT in a user's wallet, giving them access to those bids. As more integrations get built, the network effects of the shared order book grow stronger.

## Steps

When executing orders, there are often multiple steps, like approving an exchange to access your NFTs, or wrapping WETH for a bid. These steps differ for every different type of liquidity that Reservoir supports. To make this simple, you can use the `Router` endpoints, which return the exact steps that you need to follow, including descriptions that you can display to users. 

The flow looks like this:

1) Call the `Router` API with the action you want to take (create or fill)  
2) Iterate through the steps, taking the necessary action

There are four types of steps:

`transaction` > An on-chain transaction that needs to be submitted on-chain  
`signature` > A message that needs to be signed  
`request` > A request that needs to post data (e.g. to publish an order)  
`confirmation` > A request that confirms that an action is complete  

The API returns the exact data that you need to sign/submit, so it can be fed directly into an Ethereum library like ethers.js. What's nice about this design pattern is that it is completely generic. As new types of liquidity are added, you can support them automatically without needing to update your app.

## Supported Actions

The following actions are possible with the Router API:

- [Buy](https://api.reservoir.tools/#/3.%20Router/getExecuteBuyV1)  
- [Sell](https://api.reservoir.tools/#/3.%20Router/getExecuteSellV1)  
- [Bid](https://api.reservoir.tools/#/3.%20Router/getExecuteBidV1)  
- [List](https://api.reservoir.tools/#/3.%20Router/getExecuteListV1)  
- [Cancel](https://api.reservoir.tools/#/3.%20Router/getExecuteCancelV1)  

## Executing Steps

The [Reservoir Client SDK](https://github.com/reservoirprotocol/client-sdk) includes helpers that abstract the process of iterating through step, and returning callbacks that can be used to update your UI.

```js
import { buyToken } from '@reservoir0x/client-sdk'

await buyToken({
    token: `${contract}:${tokenId}`,  // Token to purchase
    signer,                           // Wallet to purchase with
    apiBase,                          // API Base URL
    setState: setSteps,               // Callback with progress updates 
    handleSuccess,                    // Callback on success
    handleError,                      // Callback on error 
})
```

To understand how it works under the hood, check out the [executeSteps](https://github.com/reservoirprotocol/client-sdk/blob/main/src/utils/executeSteps.ts) method: 

To see it in context, checkout the [Sample Marketplace](https://github.com/reservoirprotocol/sample-marketplace/blob/main/components/BuyNow.tsx)

## Example API Responses

```js
// https://api.reservoir.tools/execute/buy/v1?token=0xca7ca7bcc765f77339be2d648ba53ce9c8a262bd%3A4028&taker=0xD5c0D17cCb9071D27a4F7eD8255F59989b9aee0d
{
   "steps":[
      {
         "action":"Confirm purchase",
         "description":"To purchase this item you must confirm the transaction and pay the gas fee",
         "kind":"transaction",
         "status":"incomplete",
         "data":{
            "from":"0xd5c0d17ccb9071d27a4f7ed8255f59989b9aee0d",
            "to":"0x7f268357a8c2552623316e2562d90e642bb538e5",
            "data":"0xab834bab0000000000000000000000007f268357a8c2552623316e2562d90e642bb538e5000000000000000000000000d5c0d17ccb9071d27a4f7ed8255f59989b9aee0d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000baf2127b49fc93cbca6269fade0f7f31df4c88a7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f268357a8c2552623316e2562d90e642bb538e5000000000000000000000000fb0656515e4c4418f070d65696e40888a2f71c4600000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000baf2127b49fc93cbca6269fade0f7f31df4c88a70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004702867d72b8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000623d197d00000000000000000000000000000000000000000000000000000000000000006d8d632ef0690ffc05e453a4d31598edc25e512f6dca165e3a9988fe1c574d3000000000000000000000000000000000000000000000000000000000000001f400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004702867d72b8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000623d0d7d00000000000000000000000000000000000000000000000000000000624387cc30eb26e9e84d73a69a32534482f2a62fcfd024b550b5fb5421a095b9e76670e70000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000006a000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000000000000000000008e00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000b200000000000000000000000000000000000000000000000000000000000000b400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046bd837cf1b6599efa93e498ede03d9a4ca6bdd8baf227be4d2caa277190974522dfacc89a227596e22a5b1e3fb1638059ebf584b1baa5bbaaf633ed1891addb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4fb16a5950000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d5c0d17ccb9071d27a4f7ed8255f59989b9aee0d000000000000000000000000ca7ca7bcc765f77339be2d648ba53ce9c8a262bd0000000000000000000000000000000000000000000000000000000000000fbc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4fb16a595000000000000000000000000fb0656515e4c4418f070d65696e40888a2f71c460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ca7ca7bcc765f77339be2d648ba53ce9c8a262bd0000000000000000000000000000000000000000000000000000000000000fbc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e400000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            "value":"0x04702867d72b8000"
         }
      },
      {
         "action":"Confirmation",
         "description":"Verify that the item was successfully purchased",
         "kind":"confirmation",
         "status":"incomplete",
         "data":{
            "endpoint":"/orders/executed/v1?id=0x65dbad0b32ce4f4014f362620a0bca4b8e997da40a0de2d4d4adfb9684c320c5",
            "method":"GET"
         }
      }
   ]
}
```

```js
// https://api.reservoir.tools/execute/list/v1?orderbook=reservoir&maker=0xD5c0D17cCb9071D27a4F7eD8255F59989b9aee0d&weiPrice=1000000000000000000000&token=0x0e4b8e24789630618aa90072f520711d3d9db647%3A5356&expirationTime=1648776304
{
   "steps":[
      {
         "action":"Confirm purchase",
         "description":"To purchase this item you must confirm the transaction and pay the gas fee",
         "kind":"transaction",
         "status":"incomplete",
         "data":{
            "from":"0xd5c0d17ccb9071d27a4f7ed8255f59989b9aee0d",
            "to":"0x7f268357a8c2552623316e2562d90e642bb538e5",
            "data":"0xab834bab0000000000000000000000007f268357a8c2552623316e2562d90e642bb538e5000000000000000000000000d5c0d17ccb9071d27a4f7ed8255f59989b9aee0d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000baf2127b49fc93cbca6269fade0f7f31df4c88a7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f268357a8c2552623316e2562d90e642bb538e5000000000000000000000000fb0656515e4c4418f070d65696e40888a2f71c4600000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000baf2127b49fc93cbca6269fade0f7f31df4c88a70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004702867d72b8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000623d197d00000000000000000000000000000000000000000000000000000000000000006d8d632ef0690ffc05e453a4d31598edc25e512f6dca165e3a9988fe1c574d3000000000000000000000000000000000000000000000000000000000000001f400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004702867d72b8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000623d0d7d00000000000000000000000000000000000000000000000000000000624387cc30eb26e9e84d73a69a32534482f2a62fcfd024b550b5fb5421a095b9e76670e70000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000006a000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000000000000000000008e00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000b200000000000000000000000000000000000000000000000000000000000000b400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046bd837cf1b6599efa93e498ede03d9a4ca6bdd8baf227be4d2caa277190974522dfacc89a227596e22a5b1e3fb1638059ebf584b1baa5bbaaf633ed1891addb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4fb16a5950000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d5c0d17ccb9071d27a4f7ed8255f59989b9aee0d000000000000000000000000ca7ca7bcc765f77339be2d648ba53ce9c8a262bd0000000000000000000000000000000000000000000000000000000000000fbc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4fb16a595000000000000000000000000fb0656515e4c4418f070d65696e40888a2f71c460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ca7ca7bcc765f77339be2d648ba53ce9c8a262bd0000000000000000000000000000000000000000000000000000000000000fbc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e400000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            "value":"0x04702867d72b8000"
         }
      },
      {
         "action":"Confirmation",
         "description":"Verify that the item was successfully purchased",
         "kind":"confirmation",
         "status":"incomplete",
         "data":{
            "endpoint":"/orders/executed/v1?id=0x65dbad0b32ce4f4014f362620a0bca4b8e997da40a0de2d4d4adfb9684c320c5",
            "method":"GET"
         }
      }
   ]
}
```